{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\nodejs\\\\mern\\\\SocialApp-React-Native-master\\\\components\\\\UI\\\\Card.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableNativeFeedback from \"react-native-web/dist/exports/TouchableNativeFeedback\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Ionicons, MaterialCommunityIcons, Octicons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport { timeDifference } from \"../../helpers/timeDifference\";\nimport Colors from \"../../constants/Colors\";\nimport ENV from \"../../env\";\nimport { useDispatch } from 'react-redux';\nimport * as postActions from \"../../store/actions/posts\";\nimport { showMessage } from \"react-native-flash-message\";\nimport VerifiedUser from \"../../constants/VerifiedUser\";\n\nvar Card = function Card(props) {\n  var post = props.post,\n      userId = props.userId,\n      fromUserProfile = props.fromUserProfile;\n  var navigation = useNavigation();\n  var dispatch = useDispatch();\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isImageLoading = _useState2[0],\n      setIsImageLoading = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      imageUri = _useState4[0],\n      setImageUri = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showFullBody = _useState6[0],\n      setShowFullBody = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      imgWidth = _useState8[0],\n      setImgWidth = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      imgHeight = _useState10[0],\n      setImgHeight = _useState10[1];\n\n  var onImageErrorHandler = function onImageErrorHandler() {\n    setImageUri(ENV.defaultImageUri);\n  };\n\n  var TouchableComp = TouchableOpacity;\n\n  if (Platform.OS === 'android' && Platform.Version >= 21) {\n    TouchableComp = TouchableNativeFeedback;\n  }\n\n  var deleteHandler = function deleteHandler(id) {\n    Alert.alert('Are you sure?', 'Do you really want to delete this post?', [{\n      text: 'No',\n      style: 'default'\n    }, {\n      text: 'Yes',\n      style: 'destructive',\n      onPress: function onPress() {\n        return _regeneratorRuntime.async(function onPress$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _regeneratorRuntime.awrap(dispatch(postActions.deletePost(id)));\n\n              case 2:\n                showMessage({\n                  message: \"Your post was successfully deleted.\",\n                  type: \"success\",\n                  icon: {\n                    icon: \"success\",\n                    position: 'left'\n                  },\n                  duration: 3000\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      }\n    }]);\n  };\n\n  var checkLike = function checkLike() {\n    var match = post.likes.indexOf(userId) !== -1;\n    return match;\n  };\n\n  var toggleLike = function toggleLike() {\n    return _regeneratorRuntime.async(function toggleLike$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            props.toggleLikeHandler(post._id, checkLike());\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    var imageUrl = ENV.apiUrl + \"/post/photo/\" + post._id + \"?\" + new Date(post.updated);\n    Image.getSize(imageUrl, function (width, height) {\n      var screenWidth = Dimensions.get('window').width;\n      var scaleFactor = width / screenWidth;\n      var imageHeight = height / scaleFactor;\n      setImgWidth(screenWidth);\n      setImgHeight(imageHeight);\n    });\n  }, []);\n  return React.createElement(TouchableComp, {\n    background: Platform.OS === 'ios' ? undefined : TouchableNativeFeedback.Ripple('#b3b3b3'),\n    onPress: function onPress() {\n      return fromUserProfile ? {} : navigation.navigate('UserProfile', {\n        userId: post.postedBy._id,\n        name: post.postedBy.name\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.card,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.cardTitleHeader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: {\n      display: 'flex',\n      flex: 1,\n      flexDirection: 'row'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 21\n    }\n  }, React.createElement(View, {\n    style: styles.timeContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  }, React.createElement(Image, {\n    style: styles.userIcon,\n    source: {\n      uri: imageUri || ENV.apiUrl + \"/user/photo/\" + post.postedBy._id + \"?\" + new Date(post.postedBy.updated)\n    },\n    onError: onImageErrorHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }), React.createElement(Text, {\n    style: {\n      fontSize: 15,\n      alignSelf: 'center',\n      paddingHorizontal: 10,\n      paddingVertical: 5\n    },\n    onPress: function onPress() {\n      return navigation.navigate('UserProfile', {\n        userId: post.postedBy._id,\n        name: post.postedBy.name\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }, post.postedBy.name + \" \", VerifiedUser.verifiedUsersId.includes(post.postedBy._id) && React.createElement(Octicons, {\n    name: \"verified\",\n    size: 18,\n    color: Colors.brightBlue,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 97\n    }\n  }))), React.createElement(View, {\n    style: {\n      position: 'absolute',\n      right: 0,\n      display: 'flex',\n      flexDirection: 'row'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, React.createElement(Ionicons, {\n    name: Platform.OS === 'android' ? 'md-time' : 'ios-time',\n    size: 14,\n    style: {\n      marginTop: 3\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, \" \", timeDifference(new Date(), new Date(post.created)), \" \")))), React.createElement(View, {\n    style: styles.cardImageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 17\n    }\n  }, React.createElement(Image, {\n    style: _objectSpread(_objectSpread({}, styles.cardImage), {}, {\n      height: imgHeight\n    }),\n    source: {\n      uri: ENV.apiUrl + \"/post/photo/\" + post._id + \"?\" + new Date(post.updated)\n    },\n    onLoad: function onLoad() {\n      return setIsImageLoading(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 21\n    }\n  }), React.createElement(ActivityIndicator, {\n    style: {\n      position: 'absolute',\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    },\n    animating: isImageLoading,\n    size: \"large\",\n    color: Colors.brightBlue,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    style: styles.cardHeader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, post.title ? post.title : \"\"), post.body && post.body.length > 30 ? React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 29\n    }\n  }, showFullBody ? React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 37\n    }\n  }, post.body, React.createElement(Text, {\n    style: {\n      color: Colors.brightBlue\n    },\n    onPress: function onPress() {\n      return setShowFullBody(function (prevState) {\n        return !prevState;\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 41\n    }\n  }, \"Read Less\")) : React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 37\n    }\n  }, post.body.substring(0, 30), React.createElement(Text, {\n    style: {\n      color: Colors.brightBlue\n    },\n    onPress: function onPress() {\n      return setShowFullBody(function (prevState) {\n        return !prevState;\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 41\n    }\n  }, \"...Read More\"))) : React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 29\n    }\n  }, \" \", post.body, \" \"))), React.createElement(View, {\n    style: styles.cardFooter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    style: styles.socialBarContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }, React.createElement(View, {\n    style: styles.socialBarSection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.socialBarButton,\n    onPress: toggleLike,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  }, React.createElement(Ionicons, {\n    name: \"md-thumbs-up\",\n    size: 24,\n    style: {\n      marginRight: 5\n    },\n    color: checkLike() ? 'blue' : \"black\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 33\n    }\n  }), React.createElement(Text, {\n    style: styles.socialBarLabel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 33\n    }\n  }, \" \", post.likes.length, \" \"))), React.createElement(View, {\n    style: styles.socialBarSection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 25\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.socialBarButton,\n    onPress: function onPress() {\n      return navigation.navigate('Comments', {\n        postId: post._id,\n        userId: userId\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 29\n    }\n  }, React.createElement(Ionicons, {\n    name: \"md-chatboxes\",\n    size: 24,\n    style: {\n      marginRight: 5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 33\n    }\n  }), React.createElement(Text, {\n    style: styles.socialBarLabel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 33\n    }\n  }, \" \", post.comments.length, \" \"))))), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate('Comments', {\n        postId: post._id,\n        userId: userId\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, post.comments.length > 0 ? React.createElement(Text, {\n    style: {\n      paddingHorizontal: 16,\n      paddingBottom: 15,\n      paddingTop: 5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 25\n    }\n  }, \"View all \", post.comments.length, \" comments \") : React.createElement(Text, {\n    style: {\n      paddingHorizontal: 16,\n      paddingBottom: 15,\n      paddingTop: 5\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 25\n    }\n  }, \"Comment here \")), post.postedBy._id === userId && React.createElement(View, {\n    style: styles.postActions,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, React.createElement(View, {\n    style: styles.socialBarSection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 25\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.socialBarButton,\n    onPress: deleteHandler.bind(_this, post._id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 29\n    }\n  }, React.createElement(MaterialCommunityIcons, {\n    name: \"delete\",\n    size: 20,\n    style: {\n      marginRight: 5\n    },\n    color: \"red\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 33\n    }\n  }), React.createElement(Text, {\n    style: styles.socialBarLabel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 33\n    }\n  }, \"Delete\"))), React.createElement(View, {\n    style: styles.socialBarSection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 25\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.socialBarButton,\n    onPress: function onPress() {\n      return navigation.navigate('EditPost', {\n        postId: post._id\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 29\n    }\n  }, React.createElement(MaterialCommunityIcons, {\n    name: \"square-edit-outline\",\n    size: 20,\n    style: {\n      marginRight: 5\n    },\n    color: Colors.lightAccent,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 33\n    }\n  }), React.createElement(Text, {\n    style: styles.socialBarLabel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 33\n    }\n  }, \"Edit\"))))));\n};\n\nvar styles = StyleSheet.create({\n  userIcon: {\n    height: 30,\n    width: 30,\n    borderRadius: 30\n  },\n  card: {\n    width: '100%',\n    elevation: 3,\n    shadowColor: 'black',\n    shadowOffset: {\n      width: 2,\n      height: 5\n    },\n    shadowRadius: 4,\n    marginVertical: 8,\n    backgroundColor: \"white\"\n  },\n  cardTitleHeader: {\n    paddingVertical: 15,\n    paddingHorizontal: 5,\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  cardHeader: {\n    paddingTop: 16,\n    paddingHorizontal: 16,\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  },\n  cardContent: {\n    paddingVertical: 12.5,\n    paddingHorizontal: 16\n  },\n  cardFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingTop: 10,\n    paddingBottom: 5,\n    paddingHorizontal: 16,\n    borderBottomLeftRadius: 1,\n    borderBottomRightRadius: 1\n  },\n  cardImageContainer: {\n    backgroundColor: '#c2c2c2',\n    flex: 1,\n    display: 'flex'\n  },\n  cardImage: {\n    flex: 1,\n    width: null\n  },\n  title: {\n    fontSize: 18,\n    flex: 1\n  },\n  description: {\n    fontSize: 15,\n    color: \"#888\",\n    flex: 1,\n    marginTop: 5,\n    marginBottom: 5\n  },\n  time: {\n    fontSize: 13,\n    color: \"#808080\",\n    marginTop: 5\n  },\n  icon: {\n    width: 25,\n    height: 25\n  },\n  iconData: {\n    width: 15,\n    height: 15,\n    marginTop: 5,\n    marginRight: 5\n  },\n  timeContainer: {\n    flexDirection: 'row'\n  },\n  socialBarContainer: {\n    flexDirection: 'row'\n  },\n  socialBarSection: {\n    marginRight: 20\n  },\n  socialBarlabel: {\n    marginLeft: 20\n  },\n  socialBarButton: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  postActions: {\n    borderTopColor: '#c2c2c2',\n    borderTopWidth: 1,\n    flexDirection: 'row',\n    padding: 15\n  }\n});\nexport default Card;","map":{"version":3,"sources":["D:/nodejs/mern/SocialApp-React-Native-master/components/UI/Card.js"],"names":["React","useState","useEffect","Ionicons","MaterialCommunityIcons","Octicons","useNavigation","timeDifference","Colors","ENV","useDispatch","postActions","showMessage","VerifiedUser","Card","props","post","userId","fromUserProfile","navigation","dispatch","isImageLoading","setIsImageLoading","imageUri","setImageUri","showFullBody","setShowFullBody","imgWidth","setImgWidth","imgHeight","setImgHeight","onImageErrorHandler","defaultImageUri","TouchableComp","TouchableOpacity","Platform","OS","Version","TouchableNativeFeedback","deleteHandler","id","Alert","alert","text","style","onPress","deletePost","message","type","icon","position","duration","checkLike","match","likes","indexOf","toggleLike","toggleLikeHandler","_id","imageUrl","apiUrl","Date","updated","Image","getSize","width","height","screenWidth","Dimensions","get","scaleFactor","imageHeight","undefined","Ripple","navigate","postedBy","name","styles","card","cardTitleHeader","display","flex","flexDirection","timeContainer","userIcon","uri","fontSize","alignSelf","paddingHorizontal","paddingVertical","verifiedUsersId","includes","brightBlue","right","marginTop","created","cardImageContainer","cardImage","left","top","bottom","cardHeader","title","body","length","description","color","prevState","substring","cardFooter","socialBarContainer","socialBarSection","socialBarButton","marginRight","socialBarLabel","postId","comments","paddingBottom","paddingTop","bind","lightAccent","StyleSheet","create","borderRadius","elevation","shadowColor","shadowOffset","shadowRadius","marginVertical","backgroundColor","justifyContent","cardContent","borderBottomLeftRadius","borderBottomRightRadius","marginBottom","time","iconData","socialBarlabel","marginLeft","alignItems","borderTopColor","borderTopWidth","padding"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;;;;;;;;;AAEA,SAASC,QAAT,EAAmBC,sBAAnB,EAA2CC,QAA3C,QAA2D,oBAA3D;AACA,SAASC,aAAT,QAA8B,0BAA9B;AAEA,SAASC,cAAT;AAEA,OAAOC,MAAP;AACA,OAAOC,GAAP;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAO,KAAKC,WAAZ;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,OAAOC,YAAP;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD,EAAW;AACpB,MAAQC,IAAR,GAA0CD,KAA1C,CAAQC,IAAR;AAAA,MAAcC,MAAd,GAA0CF,KAA1C,CAAcE,MAAd;AAAA,MAAsBC,eAAtB,GAA0CH,KAA1C,CAAsBG,eAAtB;AACA,MAAMC,UAAU,GAAGb,aAAa,EAAhC;AACA,MAAMc,QAAQ,GAAGV,WAAW,EAA5B;;AAIA,kBAA4CT,QAAQ,CAAC,IAAD,CAApD;AAAA;AAAA,MAAOoB,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,mBAAgCrB,QAAQ,CAAC,EAAD,CAAxC;AAAA;AAAA,MAAOsB,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAAwCvB,QAAQ,CAAC,KAAD,CAAhD;AAAA;AAAA,MAAOwB,YAAP;AAAA,MAAqBC,eAArB;;AACA,mBAAgCzB,QAAQ,EAAxC;AAAA;AAAA,MAAO0B,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAAkC3B,QAAQ,EAA1C;AAAA;AAAA,MAAO4B,SAAP;AAAA,MAAkBC,YAAlB;;AAEA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAC9BP,IAAAA,WAAW,CAACf,GAAG,CAACuB,eAAL,CAAX;AACH,GAFD;;AAKA,MAAIC,aAAa,GAAGC,gBAApB;;AACA,MAAGC,QAAQ,CAACC,EAAT,KAAgB,SAAhB,IAA6BD,QAAQ,CAACE,OAAT,IAAoB,EAApD,EAAuD;AACnDJ,IAAAA,aAAa,GAAGK,uBAAhB;AACH;;AAGD,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACC,EAAD,EAAQ;AAC1BC,IAAAA,KAAK,CAACC,KAAN,CACI,eADJ,EAEI,yCAFJ,EAGI,CACI;AAACC,MAAAA,IAAI,EAAE,IAAP;AAAaC,MAAAA,KAAK,EAAE;AAApB,KADJ,EAEI;AACID,MAAAA,IAAI,EAAE,KADV;AAEIC,MAAAA,KAAK,EAAE,aAFX;AAGIC,MAAAA,OAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDACCzB,QAAQ,CAACT,WAAW,CAACmC,UAAZ,CAAuBN,EAAvB,CAAD,CADT;;AAAA;AAEL5B,gBAAAA,WAAW,CAAC;AACRmC,kBAAAA,OAAO,EAAE,qCADD;AAERC,kBAAAA,IAAI,EAAE,SAFE;AAGRC,kBAAAA,IAAI,EAAE;AAAEA,oBAAAA,IAAI,EAAE,SAAR;AAAmBC,oBAAAA,QAAQ,EAAE;AAA7B,mBAHE;AAIRC,kBAAAA,QAAQ,EAAE;AAJF,iBAAD,CAAX;;AAFK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHb,KAFJ,CAHJ;AAoBH,GArBD;;AAuBA,MAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpB,QAAIC,KAAK,GAAGrC,IAAI,CAACsC,KAAL,CAAWC,OAAX,CAAmBtC,MAAnB,MAA+B,CAAC,CAA5C;AACA,WAAOoC,KAAP;AACH,GAHD;;AAKA,MAAMG,UAAU,GAAG,SAAbA,UAAa;AAAA;AAAA;AAAA;AAAA;AACfzC,YAAAA,KAAK,CAAC0C,iBAAN,CAAwBzC,IAAI,CAAC0C,GAA7B,EAAkCN,SAAS,EAA3C;;AADe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAIAlD,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIyD,QAAQ,GAAMlD,GAAG,CAACmD,MAAV,oBAA+B5C,IAAI,CAAC0C,GAApC,SAA2C,IAAIG,IAAJ,CAAS7C,IAAI,CAAC8C,OAAd,CAAvD;AACAC,IAAAA,KAAK,CAACC,OAAN,CAAcL,QAAd,EAAwB,UAACM,KAAD,EAAQC,MAAR,EAAmB;AAEvC,UAAMC,WAAW,GAAGC,UAAU,CAACC,GAAX,CAAe,QAAf,EAAyBJ,KAA7C;AACA,UAAMK,WAAW,GAAGL,KAAK,GAAGE,WAA5B;AACA,UAAMI,WAAW,GAAGL,MAAM,GAAGI,WAA7B;AACA1C,MAAAA,WAAW,CAACuC,WAAD,CAAX;AACArC,MAAAA,YAAY,CAACyC,WAAD,CAAZ;AACH,KAPD;AAQH,GAVQ,EAUN,EAVM,CAAT;AAaA,SACI,oBAAC,aAAD;AACI,IAAA,UAAU,EAAGpC,QAAQ,CAACC,EAAT,KAAgB,KAAhB,GAAwBoC,SAAxB,GAAoClC,uBAAuB,CAACmC,MAAxB,CAA+B,SAA/B,CADrD;AAEI,IAAA,OAAO,EAAE;AAAA,aACLvD,eAAe,GACf,EADe,GAGfC,UAAU,CAACuD,QAAX,CAAoB,aAApB,EAAmC;AAAEzD,QAAAA,MAAM,EAAED,IAAI,CAAC2D,QAAL,CAAcjB,GAAxB;AAA6BkB,QAAAA,IAAI,EAAE5D,IAAI,CAAC2D,QAAL,CAAcC;AAAjD,OAAnC,CAJK;AAAA,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEC,MAAM,CAACC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAED,MAAM,CAACE,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,OAAO,EAAE,MAAX;AAAmBC,MAAAA,IAAI,EAAE,CAAzB;AAA4BC,MAAAA,aAAa,EAAE;AAA3C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEL,MAAM,CAACM,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AACI,IAAA,KAAK,EAAEN,MAAM,CAACO,QADlB;AAEI,IAAA,MAAM,EAAE;AAAEC,MAAAA,GAAG,EAAE9D,QAAQ,IAAOd,GAAG,CAACmD,MAAX,oBAAgC5C,IAAI,CAAC2D,QAAL,CAAcjB,GAA9C,SAAqD,IAAIG,IAAJ,CAAS7C,IAAI,CAAC2D,QAAL,CAAcb,OAAvB;AAApE,KAFZ;AAGI,IAAA,OAAO,EAAE/B,mBAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAMI,oBAAC,IAAD;AACI,IAAA,KAAK,EAAE;AAAEuD,MAAAA,QAAQ,EAAE,EAAZ;AAAgBC,MAAAA,SAAS,EAAE,QAA3B;AAAqCC,MAAAA,iBAAiB,EAAE,EAAxD;AAA4DC,MAAAA,eAAe,EAAE;AAA7E,KADX;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMtE,UAAU,CAACuD,QAAX,CAAoB,aAApB,EAAmC;AAAEzD,QAAAA,MAAM,EAAED,IAAI,CAAC2D,QAAL,CAAcjB,GAAxB;AAA6BkB,QAAAA,IAAI,EAAE5D,IAAI,CAAC2D,QAAL,CAAcC;AAAjD,OAAnC,CAAN;AAAA,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIK5D,IAAI,CAAC2D,QAAL,CAAcC,IAAd,GAAqB,GAJ1B,EAMQ/D,YAAY,CAAC6E,eAAb,CAA6BC,QAA7B,CAAsC3E,IAAI,CAAC2D,QAAL,CAAcjB,GAApD,KAA4D,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAC,UAAf;AAA0B,IAAA,IAAI,EAAE,EAAhC;AAAoC,IAAA,KAAK,EAAElD,MAAM,CAACoF,UAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANpE,CANJ,CADJ,EAiBI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAE1C,MAAAA,QAAQ,EAAE,UAAZ;AAAwB2C,MAAAA,KAAK,EAAE,CAA/B;AAAkCb,MAAAA,OAAO,EAAE,MAA3C;AAAmDE,MAAAA,aAAa,EAAE;AAAlE,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,QAAD;AACI,IAAA,IAAI,EAAG/C,QAAQ,CAACC,EAAT,KAAgB,SAAhB,GAA4B,SAA5B,GAAwC,UADnD;AAEI,IAAA,IAAI,EAAG,EAFX;AAGI,IAAA,KAAK,EAAE;AAAE0D,MAAAA,SAAS,EAAE;AAAb,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAMI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAQvF,cAAc,CAAC,IAAIsD,IAAJ,EAAD,EAAa,IAAIA,IAAJ,CAAS7C,IAAI,CAAC+E,OAAd,CAAb,CAAtB,MANJ,CAjBJ,CADJ,CADJ,EA6BI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAElB,MAAM,CAACmB,kBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,KAAD;AACI,IAAA,KAAK,kCAAMnB,MAAM,CAACoB,SAAb;AAAwB/B,MAAAA,MAAM,EAAErC;AAAhC,MADT;AAEI,IAAA,MAAM,EAAE;AAAEwD,MAAAA,GAAG,EAAK5E,GAAG,CAACmD,MAAT,oBAA8B5C,IAAI,CAAC0C,GAAnC,SAA0C,IAAIG,IAAJ,CAAS7C,IAAI,CAAC8C,OAAd;AAA/C,KAFZ;AAGI,IAAA,MAAM,EAAE;AAAA,aAAMxC,iBAAiB,CAAC,KAAD,CAAvB;AAAA,KAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAMI,oBAAC,iBAAD;AACI,IAAA,KAAK,EAAE;AAAE4B,MAAAA,QAAQ,EAAE,UAAZ;AAAwBgD,MAAAA,IAAI,EAAE,CAA9B;AAAiCL,MAAAA,KAAK,EAAE,CAAxC;AAA2CM,MAAAA,GAAG,EAAE,CAAhD;AAAmDC,MAAAA,MAAM,EAAE;AAA3D,KADX;AAEI,IAAA,SAAS,EAAE/E,cAFf;AAGI,IAAA,IAAI,EAAC,OAHT;AAII,IAAA,KAAK,EAAEb,MAAM,CAACoF,UAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,CA7BJ,EA0CI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEf,MAAM,CAACwB,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAExB,MAAM,CAACyB,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4BtF,IAAI,CAACsF,KAAL,GAAatF,IAAI,CAACsF,KAAlB,GAA0B,EAAtD,CADJ,EAEMtF,IAAI,CAACuF,IAAL,IAAavF,IAAI,CAACuF,IAAL,CAAUC,MAAV,GAAmB,EAAhC,GACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACM/E,YAAY,GACV,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEoD,MAAM,CAAC4B,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKzF,IAAI,CAACuF,IADV,EAEI,oBAAC,IAAD;AACI,IAAA,KAAK,EAAE;AAAEG,MAAAA,KAAK,EAAElG,MAAM,CAACoF;AAAhB,KADX;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMlE,eAAe,CAAC,UAACiF,SAAD;AAAA,eAAe,CAACA,SAAhB;AAAA,OAAD,CAArB;AAAA,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFJ,CADU,GAWV,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE9B,MAAM,CAAC4B,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKzF,IAAI,CAACuF,IAAL,CAAUK,SAAV,CAAoB,CAApB,EAAuB,EAAvB,CADL,EAEI,oBAAC,IAAD;AACI,IAAA,KAAK,EAAE;AAAEF,MAAAA,KAAK,EAAElG,MAAM,CAACoF;AAAhB,KADX;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMlE,eAAe,CAAC,UAACiF,SAAD;AAAA,eAAe,CAACA,SAAhB;AAAA,OAAD,CAArB;AAAA,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,CAZR,CADF,GA0BE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE9B,MAAM,CAAC4B,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAmCzF,IAAI,CAACuF,IAAxC,MA5BR,CADJ,CA1CJ,EA6EI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE1B,MAAM,CAACgC,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEhC,MAAM,CAACiC,kBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEjC,MAAM,CAACkC,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,gBAAD;AACI,IAAA,KAAK,EAAElC,MAAM,CAACmC,eADlB;AAEI,IAAA,OAAO,EAAExD,UAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAII,oBAAC,QAAD;AACI,IAAA,IAAI,EAAC,cADT;AAEI,IAAA,IAAI,EAAE,EAFV;AAGI,IAAA,KAAK,EAAE;AAAEyD,MAAAA,WAAW,EAAE;AAAf,KAHX;AAII,IAAA,KAAK,EAAE7D,SAAS,KAAK,MAAL,GAAc,OAJlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,EAUI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEyB,MAAM,CAACqC,cAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAsClG,IAAI,CAACsC,KAAL,CAAWkD,MAAjD,MAVJ,CADJ,CADJ,EAeI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE3B,MAAM,CAACkC,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,gBAAD;AACI,IAAA,KAAK,EAAElC,MAAM,CAACmC,eADlB;AAEI,IAAA,OAAO,EAAE;AAAA,aAAM7F,UAAU,CAACuD,QAAX,CAAoB,UAApB,EAA+B;AAAEyC,QAAAA,MAAM,EAAEnG,IAAI,CAAC0C,GAAf;AAAoBzC,QAAAA,MAAM,EAAEA;AAA5B,OAA/B,CAAN;AAAA,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAII,oBAAC,QAAD;AACI,IAAA,IAAI,EAAC,cADT;AAEI,IAAA,IAAI,EAAE,EAFV;AAGI,IAAA,KAAK,EAAE;AAAEgG,MAAAA,WAAW,EAAE;AAAf,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,EASI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpC,MAAM,CAACqC,cAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAsClG,IAAI,CAACoG,QAAL,CAAcZ,MAApD,MATJ,CADJ,CAfJ,CADJ,CA7EJ,EA8GI,oBAAC,gBAAD;AACI,IAAA,OAAO,EAAE;AAAA,aAAMrF,UAAU,CAACuD,QAAX,CAAoB,UAApB,EAAgC;AAAEyC,QAAAA,MAAM,EAAEnG,IAAI,CAAC0C,GAAf;AAAoBzC,QAAAA,MAAM,EAAEA;AAA5B,OAAhC,CAAN;AAAA,KADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGMD,IAAI,CAACoG,QAAL,CAAcZ,MAAd,GAAuB,CAAvB,GACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEhB,MAAAA,iBAAiB,EAAE,EAArB;AAAyB6B,MAAAA,aAAa,EAAE,EAAxC;AAA4CC,MAAAA,UAAU,EAAE;AAAxD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAqFtG,IAAI,CAACoG,QAAL,CAAcZ,MAAnG,eADF,GAGE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEhB,MAAAA,iBAAiB,EAAE,EAArB;AAAyB6B,MAAAA,aAAa,EAAE,EAAxC;AAA4CC,MAAAA,UAAU,EAAE;AAAxD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBANR,CA9GJ,EAuHMtG,IAAI,CAAC2D,QAAL,CAAcjB,GAAd,KAAsBzC,MAAtB,IACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE4D,MAAM,CAAClE,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEkE,MAAM,CAACkC,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,gBAAD;AACI,IAAA,KAAK,EAAElC,MAAM,CAACmC,eADlB;AAEI,IAAA,OAAO,EAAEzE,aAAa,CAACgF,IAAd,CAAmB,KAAnB,EAAyBvG,IAAI,CAAC0C,GAA9B,CAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAII,oBAAC,sBAAD;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,IAAI,EAAE,EAFV;AAGI,IAAA,KAAK,EAAE;AAAEuD,MAAAA,WAAW,EAAE;AAAf,KAHX;AAII,IAAA,KAAK,EAAC,KAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,EAUI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEpC,MAAM,CAACqC,cAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAVJ,CADJ,CADJ,EAeI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErC,MAAM,CAACkC,gBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,gBAAD;AACI,IAAA,KAAK,EAAElC,MAAM,CAACmC,eADlB;AAEI,IAAA,OAAO,EAAE;AAAA,aAAM7F,UAAU,CAACuD,QAAX,CAAoB,UAApB,EAAgC;AAAEyC,QAAAA,MAAM,EAAEnG,IAAI,CAAC0C;AAAf,OAAhC,CAAN;AAAA,KAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAII,oBAAC,sBAAD;AACI,IAAA,IAAI,EAAC,qBADT;AAEI,IAAA,IAAI,EAAE,EAFV;AAGI,IAAA,KAAK,EAAE;AAAEuD,MAAAA,WAAW,EAAE;AAAf,KAHX;AAII,IAAA,KAAK,EAAEzG,MAAM,CAACgH,WAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,EAUI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE3C,MAAM,CAACqC,cAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAVJ,CADJ,CAfJ,CAxHR,CARJ,CADJ;AAqKH,CA1OD;;AA4OA,IAAMrC,MAAM,GAAG4C,UAAU,CAACC,MAAX,CAAkB;AAC7BtC,EAAAA,QAAQ,EAAE;AACNlB,IAAAA,MAAM,EAAE,EADF;AAEND,IAAAA,KAAK,EAAE,EAFD;AAGN0D,IAAAA,YAAY,EAAE;AAHR,GADmB;AAM7B7C,EAAAA,IAAI,EAAE;AACFb,IAAAA,KAAK,EAAE,MADL;AAEF2D,IAAAA,SAAS,EAAE,CAFT;AAGFC,IAAAA,WAAW,EAAE,OAHX;AAKFC,IAAAA,YAAY,EAAE;AACV7D,MAAAA,KAAK,EAAE,CADG;AAEVC,MAAAA,MAAM,EAAE;AAFE,KALZ;AASF6D,IAAAA,YAAY,EAAE,CATZ;AAUFC,IAAAA,cAAc,EAAE,CAVd;AAWFC,IAAAA,eAAe,EAAE;AAXf,GANuB;AAmB7BlD,EAAAA,eAAe,EAAE;AACbU,IAAAA,eAAe,EAAE,EADJ;AAEbD,IAAAA,iBAAiB,EAAE,CAFN;AAGbN,IAAAA,aAAa,EAAE,KAHF;AAIbgD,IAAAA,cAAc,EAAE;AAJH,GAnBY;AAyB7B7B,EAAAA,UAAU,EAAE;AACRiB,IAAAA,UAAU,EAAE,EADJ;AAER9B,IAAAA,iBAAiB,EAAE,EAFX;AAGRN,IAAAA,aAAa,EAAE,KAHP;AAIRgD,IAAAA,cAAc,EAAE;AAJR,GAzBiB;AA+B7BC,EAAAA,WAAW,EAAE;AACT1C,IAAAA,eAAe,EAAE,IADR;AAETD,IAAAA,iBAAiB,EAAE;AAFV,GA/BgB;AAmC7BqB,EAAAA,UAAU,EAAE;AACR3B,IAAAA,aAAa,EAAE,KADP;AAERgD,IAAAA,cAAc,EAAE,eAFR;AAGRZ,IAAAA,UAAU,EAAE,EAHJ;AAIRD,IAAAA,aAAa,EAAE,CAJP;AAKR7B,IAAAA,iBAAiB,EAAE,EALX;AAMR4C,IAAAA,sBAAsB,EAAE,CANhB;AAORC,IAAAA,uBAAuB,EAAE;AAPjB,GAnCiB;AA4C7BrC,EAAAA,kBAAkB,EAAE;AAChBiC,IAAAA,eAAe,EAAE,SADD;AAEhBhD,IAAAA,IAAI,EAAE,CAFU;AAGhBD,IAAAA,OAAO,EAAE;AAHO,GA5CS;AAkD7BiB,EAAAA,SAAS,EAAE;AACPhB,IAAAA,IAAI,EAAE,CADC;AAGPhB,IAAAA,KAAK,EAAE;AAHA,GAlDkB;AAwD7BqC,EAAAA,KAAK,EAAE;AACHhB,IAAAA,QAAQ,EAAE,EADP;AAEHL,IAAAA,IAAI,EAAE;AAFH,GAxDsB;AA4D7BwB,EAAAA,WAAW,EAAE;AACTnB,IAAAA,QAAQ,EAAE,EADD;AAEToB,IAAAA,KAAK,EAAE,MAFE;AAGTzB,IAAAA,IAAI,EAAE,CAHG;AAITa,IAAAA,SAAS,EAAE,CAJF;AAKTwC,IAAAA,YAAY,EAAE;AALL,GA5DgB;AAmE7BC,EAAAA,IAAI,EAAE;AACFjD,IAAAA,QAAQ,EAAE,EADR;AAEFoB,IAAAA,KAAK,EAAE,SAFL;AAGFZ,IAAAA,SAAS,EAAE;AAHT,GAnEuB;AAwE7B7C,EAAAA,IAAI,EAAE;AACFgB,IAAAA,KAAK,EAAE,EADL;AAEFC,IAAAA,MAAM,EAAE;AAFN,GAxEuB;AA4E7BsE,EAAAA,QAAQ,EAAE;AACNvE,IAAAA,KAAK,EAAE,EADD;AAENC,IAAAA,MAAM,EAAE,EAFF;AAGN4B,IAAAA,SAAS,EAAE,CAHL;AAINmB,IAAAA,WAAW,EAAE;AAJP,GA5EmB;AAkF7B9B,EAAAA,aAAa,EAAE;AACXD,IAAAA,aAAa,EAAE;AADJ,GAlFc;AAsF7B4B,EAAAA,kBAAkB,EAAE;AAChB5B,IAAAA,aAAa,EAAE;AADC,GAtFS;AAyF7B6B,EAAAA,gBAAgB,EAAE;AACdE,IAAAA,WAAW,EAAE;AADC,GAzFW;AA4F7BwB,EAAAA,cAAc,EAAE;AACZC,IAAAA,UAAU,EAAE;AADA,GA5Fa;AA+F7B1B,EAAAA,eAAe,EAAE;AACb9B,IAAAA,aAAa,EAAE,KADF;AAEbgD,IAAAA,cAAc,EAAE,QAFH;AAGbS,IAAAA,UAAU,EAAE;AAHC,GA/FY;AAoG7BhI,EAAAA,WAAW,EAAE;AACTiI,IAAAA,cAAc,EAAE,SADP;AAETC,IAAAA,cAAc,EAAE,CAFP;AAGT3D,IAAAA,aAAa,EAAE,KAHN;AAIT4D,IAAAA,OAAO,EAAE;AAJA;AApGgB,CAAlB,CAAf;AA4GA,eAAehI,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, Image, TouchableOpacity, ActivityIndicator, Platform, Alert, TouchableNativeFeedback, Dimensions } from 'react-native';\r\nimport { Ionicons, MaterialCommunityIcons, Octicons } from '@expo/vector-icons';\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nimport { timeDifference } from '../../helpers/timeDifference';\r\n\r\nimport Colors from '../../constants/Colors';\r\nimport ENV from '../../env';\r\nimport { useDispatch } from 'react-redux';\r\nimport * as postActions from '../../store/actions/posts';\r\nimport { showMessage } from \"react-native-flash-message\";\r\nimport VerifiedUser from '../../constants/VerifiedUser';\r\n\r\nconst Card = (props) => {\r\n    const { post, userId, fromUserProfile } = props;\r\n    const navigation = useNavigation();\r\n    const dispatch = useDispatch();\r\n\r\n    // const liked = post.likes.indexOf(userId) !== -1;\r\n\r\n    const [isImageLoading, setIsImageLoading] = useState(true);\r\n    const [imageUri, setImageUri] = useState('')\r\n    const [showFullBody, setShowFullBody] = useState(false);\r\n    const [imgWidth, setImgWidth] = useState();\r\n    const [imgHeight, setImgHeight] = useState();\r\n\r\n    const onImageErrorHandler = () => {\r\n        setImageUri(ENV.defaultImageUri)\r\n    }\r\n\r\n\r\n    let TouchableComp = TouchableOpacity;\r\n    if(Platform.OS === 'android' && Platform.Version >= 21){\r\n        TouchableComp = TouchableNativeFeedback;\r\n    }\r\n\r\n\r\n    const deleteHandler = (id) => {\r\n        Alert.alert(\r\n            'Are you sure?', \r\n            'Do you really want to delete this post?',\r\n            [\r\n                {text: 'No', style: 'default'},\r\n                {\r\n                    text: 'Yes', \r\n                    style: 'destructive', \r\n                    onPress: async () => {\r\n                        await dispatch(postActions.deletePost(id))\r\n                        showMessage({\r\n                            message: \"Your post was successfully deleted.\",\r\n                            type: \"success\",\r\n                            icon: { icon: \"success\", position: 'left' },\r\n                            duration: 3000\r\n                        });\r\n                    }\r\n                }\r\n            ]\r\n        )\r\n    };\r\n\r\n    const checkLike = () => {\r\n        let match = post.likes.indexOf(userId) !== -1;\r\n        return match;\r\n    }\r\n\r\n    const toggleLike = async () => {\r\n        props.toggleLikeHandler(post._id, checkLike());\r\n    }\r\n\r\n    useEffect(() => {\r\n        let imageUrl = `${ENV.apiUrl}/post/photo/${post._id}?${new Date(post.updated)}`;\r\n        Image.getSize(imageUrl, (width, height) => {\r\n            // calculate image width and height \r\n            const screenWidth = Dimensions.get('window').width\r\n            const scaleFactor = width / screenWidth\r\n            const imageHeight = height / scaleFactor\r\n            setImgWidth(screenWidth);\r\n            setImgHeight(imageHeight);\r\n        })\r\n    }, [])\r\n\r\n\r\n    return (\r\n        <TouchableComp \r\n            background={ Platform.OS === 'ios' ? undefined : TouchableNativeFeedback.Ripple('#b3b3b3') }\r\n            onPress={() =>  \r\n                fromUserProfile ? \r\n                {} \r\n                : \r\n                navigation.navigate('UserProfile', { userId: post.postedBy._id, name: post.postedBy.name }) }\r\n        >\r\n            <View style={styles.card}>\r\n                <View style={styles.cardTitleHeader}>\r\n                    <View style={{ display: 'flex', flex: 1, flexDirection: 'row' }} >\r\n                        <View style={styles.timeContainer}>\r\n                            <Image\r\n                                style={styles.userIcon} \r\n                                source={{ uri: imageUri || `${ENV.apiUrl}/user/photo/${post.postedBy._id}?${new Date(post.postedBy.updated)}` }}\r\n                                onError={onImageErrorHandler}\r\n                            />\r\n                            <Text \r\n                                style={{ fontSize: 15, alignSelf: 'center', paddingHorizontal: 10, paddingVertical: 5 }} \r\n                                onPress={() => navigation.navigate('UserProfile', { userId: post.postedBy._id, name: post.postedBy.name })} \r\n                            > \r\n                                {post.postedBy.name + \" \"}\r\n                                {\r\n                                    VerifiedUser.verifiedUsersId.includes(post.postedBy._id) && <Octicons name=\"verified\" size={18} color={Colors.brightBlue} />\r\n                                }\r\n                            </Text>\r\n                        </View>\r\n                        <View style={{ position: 'absolute', right: 0, display: 'flex', flexDirection: 'row'}}>\r\n                            <Ionicons \r\n                                name={ Platform.OS === 'android' ? 'md-time' : 'ios-time' }\r\n                                size= {14}\r\n                                style={{ marginTop: 3 }}\r\n                            />\r\n                            <Text> {timeDifference(new Date(), new Date(post.created))} </Text>\r\n                        </View>\r\n                    </View>\r\n                </View>\r\n                <View style={styles.cardImageContainer} >\r\n                    <Image \r\n                        style={{...styles.cardImage, height: imgHeight }}\r\n                        source={{ uri: `${ENV.apiUrl}/post/photo/${post._id}?${new Date(post.updated)}` }}\r\n                        onLoad={() => setIsImageLoading(false)}\r\n                    />\r\n                    <ActivityIndicator \r\n                        style={{ position: 'absolute', left: 0, right: 0, top: 0, bottom: 0 }} \r\n                        animating={isImageLoading} \r\n                        size='large' \r\n                        color={Colors.brightBlue} \r\n                    />\r\n                </View>\r\n                <View style={styles.cardHeader}>\r\n                    <View>\r\n                        <Text style={styles.title}>{post.title ? post.title : \"\"}</Text>\r\n                        { post.body && post.body.length > 30 ? (\r\n                            <View>\r\n                                { showFullBody ? (\r\n                                    <Text style={styles.description}> \r\n                                        {post.body} \r\n                                        <Text\r\n                                            style={{ color: Colors.brightBlue }}\r\n                                            onPress={() => setShowFullBody((prevState) => !prevState)} \r\n                                        >\r\n                                            Read Less\r\n                                        </Text>\r\n                                    </Text>\r\n                                ) : (\r\n                                    <Text style={styles.description}> \r\n                                        {post.body.substring(0, 30)}\r\n                                        <Text\r\n                                            style={{ color: Colors.brightBlue }}\r\n                                            onPress={() => setShowFullBody((prevState) => !prevState)} \r\n                                        >\r\n                                            ...Read More\r\n                                        </Text>\r\n                                    </Text>\r\n                                ) }\r\n\r\n                            </View>\r\n                        ) : (\r\n                            <Text style={styles.description}> {post.body} </Text>\r\n                        ) }\r\n                        \r\n                    </View>\r\n                </View>\r\n\r\n                <View style={styles.cardFooter}>\r\n                    <View style={styles.socialBarContainer}>\r\n                        <View style={styles.socialBarSection}>\r\n                            <TouchableOpacity \r\n                                style={styles.socialBarButton}\r\n                                onPress={toggleLike}\r\n                            >\r\n                                <Ionicons \r\n                                    name=\"md-thumbs-up\"\r\n                                    size={24}\r\n                                    style={{ marginRight: 5 }}\r\n                                    color={checkLike() ? 'blue' : \"black\"}\r\n                                />\r\n                                <Text style={styles.socialBarLabel}> {post.likes.length} </Text>\r\n                            </TouchableOpacity>\r\n                        </View>\r\n                        <View style={styles.socialBarSection}>\r\n                            <TouchableOpacity \r\n                                style={styles.socialBarButton}\r\n                                onPress={() => navigation.navigate('Comments',{ postId: post._id, userId: userId })}\r\n                            >\r\n                                <Ionicons \r\n                                    name=\"md-chatboxes\"\r\n                                    size={24}\r\n                                    style={{ marginRight: 5 }}\r\n                                />\r\n                                <Text style={styles.socialBarLabel}> {post.comments.length} </Text>\r\n                            </TouchableOpacity>\r\n                        </View>\r\n                        \r\n                        \r\n                    </View>\r\n                </View>\r\n                <TouchableOpacity \r\n                    onPress={() => navigation.navigate('Comments', { postId: post._id, userId: userId })}\r\n                >\r\n                    { post.comments.length > 0 ? (\r\n                        <Text style={{ paddingHorizontal: 16, paddingBottom: 15, paddingTop: 5 }} >View all {post.comments.length} comments </Text>\r\n                    ) : (\r\n                        <Text style={{ paddingHorizontal: 16, paddingBottom: 15, paddingTop: 5 }} >Comment here </Text>\r\n                    ) }\r\n                </TouchableOpacity>\r\n                { post.postedBy._id === userId && (\r\n                    <View style={styles.postActions} >\r\n                        <View style={styles.socialBarSection}>\r\n                            <TouchableOpacity \r\n                                style={styles.socialBarButton}\r\n                                onPress={deleteHandler.bind(this, post._id)}\r\n                            >\r\n                                <MaterialCommunityIcons \r\n                                    name=\"delete\"\r\n                                    size={20}\r\n                                    style={{ marginRight: 5 }}\r\n                                    color=\"red\"\r\n                                />\r\n                                <Text style={styles.socialBarLabel}>Delete</Text>\r\n                            </TouchableOpacity>\r\n                        </View>\r\n                        <View style={styles.socialBarSection}>\r\n                            <TouchableOpacity \r\n                                style={styles.socialBarButton}\r\n                                onPress={() => navigation.navigate('EditPost', { postId: post._id })}\r\n                            >\r\n                                <MaterialCommunityIcons \r\n                                    name=\"square-edit-outline\"\r\n                                    size={20}\r\n                                    style={{ marginRight: 5 }}\r\n                                    color={Colors.lightAccent}\r\n                                />\r\n                                <Text style={styles.socialBarLabel}>Edit</Text>\r\n                            </TouchableOpacity>\r\n                        </View>\r\n                    </View>\r\n                )}\r\n\r\n            </View>\r\n    \r\n        </TouchableComp>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    userIcon: {\r\n        height: 30,\r\n        width: 30,\r\n        borderRadius: 30\r\n    },\r\n    card: {\r\n        width: '100%',\r\n        elevation: 3,\r\n        shadowColor: 'black',\r\n\r\n        shadowOffset: {\r\n            width: 2,\r\n            height: 5\r\n        },\r\n        shadowRadius: 4,\r\n        marginVertical: 8,\r\n        backgroundColor: \"white\"\r\n    },\r\n    cardTitleHeader: {\r\n        paddingVertical: 15,\r\n        paddingHorizontal: 5,\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n    },\r\n    cardHeader: {\r\n        paddingTop: 16,\r\n        paddingHorizontal: 16,\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n    },\r\n    cardContent: {\r\n        paddingVertical: 12.5,\r\n        paddingHorizontal: 16,\r\n    },\r\n    cardFooter: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        paddingTop: 10,\r\n        paddingBottom: 5,\r\n        paddingHorizontal: 16,\r\n        borderBottomLeftRadius: 1,\r\n        borderBottomRightRadius: 1,\r\n    },\r\n    cardImageContainer: { \r\n        backgroundColor: '#c2c2c2', \r\n        flex: 1, \r\n        display: 'flex',\r\n        // height: 275 \r\n    },\r\n    cardImage: {\r\n        flex: 1,\r\n        // height: 275,\r\n        width: null\r\n    },\r\n    /******** card components **************/\r\n    title: {\r\n        fontSize: 18,\r\n        flex: 1,\r\n    },\r\n    description: {\r\n        fontSize: 15,\r\n        color: \"#888\",\r\n        flex: 1,\r\n        marginTop: 5,\r\n        marginBottom: 5,\r\n    },\r\n    time: {\r\n        fontSize: 13,\r\n        color: \"#808080\",\r\n        marginTop: 5\r\n    },\r\n    icon: {\r\n        width: 25,\r\n        height: 25,\r\n    },\r\n    iconData: {\r\n        width: 15,\r\n        height: 15,\r\n        marginTop: 5,\r\n        marginRight: 5\r\n    },\r\n    timeContainer: {\r\n        flexDirection: 'row'\r\n    },\r\n    /******** social bar ******************/\r\n    socialBarContainer: {\r\n        flexDirection: 'row'\r\n    },\r\n    socialBarSection: {\r\n        marginRight: 20\r\n    },\r\n    socialBarlabel: {\r\n        marginLeft: 20\r\n    },\r\n    socialBarButton: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n    },\r\n    postActions: {\r\n        borderTopColor: '#c2c2c2',\r\n        borderTopWidth: 1,\r\n        flexDirection: 'row',\r\n        padding: 15,\r\n    }\r\n})\r\n\r\nexport default Card;"]},"metadata":{},"sourceType":"module"}
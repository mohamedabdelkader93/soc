{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\nodejs\\\\mern\\\\SocialApp-React-Native-master\\\\components\\\\UI\\\\UserList.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Octicons } from '@expo/vector-icons';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as usersActions from \"../../store/actions/users\";\nimport Colors from \"../../constants/Colors\";\nimport { showMessage } from \"react-native-flash-message\";\nimport { useNavigation } from '@react-navigation/native';\nimport ENV from \"../../env\";\nimport VerifiedUser from \"../../constants/VerifiedUser\";\n\nvar UserList = function UserList(props) {\n  var item = props.item,\n      followHandler = props.followHandler;\n\n  var _useState = useState(ENV.apiUrl + \"/user/photo/\" + item._id),\n      _useState2 = _slicedToArray(_useState, 2),\n      imageUri = _useState2[0],\n      setImageUri = _useState2[1];\n\n  var loggedInUserId = useSelector(function (state) {\n    return state.auth.user._id;\n  });\n  var allUsers = useSelector(function (state) {\n    return state.users.allUsers;\n  });\n  var loggedInUser = allUsers.filter(function (u) {\n    return u._id === loggedInUserId;\n  })[0];\n  var dispatch = useDispatch();\n  var navigation = useNavigation();\n\n  var onImageErrorHandler = function onImageErrorHandler() {\n    setImageUri(ENV.defaultImageUri);\n  };\n\n  var checkFollow = function checkFollow(userId) {\n    var isFollowed = loggedInUser.following.filter(function (f) {\n      return f._id === userId;\n    }).length !== 0;\n    return isFollowed;\n  };\n\n  var followUserHandler = function followUserHandler() {\n    return _regeneratorRuntime.async(function followUserHandler$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!checkFollow(item._id)) {\n              _context.next = 5;\n              break;\n            }\n\n            followHandler(item._id);\n            showMessage({\n              message: \"Your are already following \" + item.name + \".\",\n              type: \"success\",\n              duration: 3000,\n              icon: {\n                icon: \"success\",\n                position: 'left'\n              }\n            });\n            _context.next = 11;\n            break;\n\n          case 5:\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(dispatch(usersActions.followFindPeople(item._id)));\n\n          case 7:\n            followHandler(item._id);\n            showMessage({\n              message: \"Your are now following \" + item.name + \".\",\n              type: \"success\",\n              duration: 3000,\n              icon: {\n                icon: \"success\",\n                position: 'left'\n              }\n            });\n            _context.next = 11;\n            return _regeneratorRuntime.awrap(dispatch(usersActions.followUser(item)));\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate('UserProfile', {\n        userId: item._id,\n        name: item.name\n      });\n    },\n    style: styles.card,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, React.createElement(Image, {\n    style: styles.userImage,\n    source: {\n      uri: imageUri\n    },\n    onError: onImageErrorHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: styles.cardFooter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    onPress: function onPress() {\n      return navigation.navigate('UserProfile', {\n        userId: item._id,\n        name: item.name\n      });\n    },\n    style: _objectSpread(_objectSpread({}, styles.name), {}, {\n      marginRight: 10\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, item.name.length > 10 ? React.createElement(React.Fragment, null, item.name.substring(0, 10), \"... \") : React.createElement(React.Fragment, null, item.name + \" \"), VerifiedUser.verifiedUsersId.includes(item._id) && React.createElement(Octicons, {\n    name: \"verified\",\n    size: 20,\n    color: Colors.brightBlue,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 80\n    }\n  })), React.createElement(Text, {\n    style: styles.position,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, item.email.length > 15 ? React.createElement(React.Fragment, null, item.email.substring(0, 15), \"...\") : React.createElement(React.Fragment, null, item.email)), React.createElement(TouchableOpacity, {\n    style: styles.followButton,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    onPress: followUserHandler,\n    style: styles.followButtonText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, \"Follow\")))));\n};\n\nvar styles = StyleSheet.create({\n  card: {\n    shadowColor: '#00000021',\n    shadowOffset: {\n      width: 0,\n      height: 6\n    },\n    shadowOpacity: 0.37,\n    shadowRadius: 7.49,\n    elevation: 12,\n    marginVertical: 5,\n    backgroundColor: \"white\",\n    flexBasis: '46%',\n    marginHorizontal: 5,\n    borderRadius: 25\n  },\n  cardFooter: {\n    paddingVertical: 17,\n    paddingHorizontal: 16,\n    borderTopLeftRadius: 1,\n    borderTopRightRadius: 1,\n    flexDirection: 'row',\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  cardContent: {\n    paddingVertical: 12.5,\n    paddingHorizontal: 16\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingTop: 12.5,\n    paddingBottom: 25,\n    paddingHorizontal: 16,\n    borderBottomLeftRadius: 1,\n    borderBottomRightRadius: 1\n  },\n  userImage: {\n    height: 120,\n    width: 120,\n    borderRadius: 60,\n    marginTop: 20,\n    alignSelf: 'center',\n    borderColor: \"#DCDCDC\",\n    borderWidth: 3,\n    backgroundColor: '#c2c2c2'\n  },\n  name: {\n    fontSize: 18,\n    flex: 1,\n    alignSelf: 'center',\n    color: \"#008080\",\n    fontWeight: 'bold'\n  },\n  position: {\n    fontSize: 14,\n    flex: 1,\n    alignSelf: 'center',\n    color: \"#696969\"\n  },\n  followButton: {\n    marginTop: 10,\n    height: 35,\n    width: 100,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 30,\n    backgroundColor: Colors.brightBlue\n  },\n  followButtonText: {\n    color: \"#FFFFFF\",\n    fontSize: 18\n  },\n  icon: {\n    height: 20,\n    width: 20\n  }\n});\nexport default UserList;","map":{"version":3,"sources":["D:/nodejs/mern/SocialApp-React-Native-master/components/UI/UserList.js"],"names":["React","useEffect","useState","Octicons","useDispatch","useSelector","usersActions","Colors","showMessage","useNavigation","ENV","VerifiedUser","UserList","props","item","followHandler","apiUrl","_id","imageUri","setImageUri","loggedInUserId","state","auth","user","allUsers","users","loggedInUser","filter","u","dispatch","navigation","onImageErrorHandler","defaultImageUri","checkFollow","userId","isFollowed","following","f","length","followUserHandler","message","name","type","duration","icon","position","followFindPeople","followUser","navigate","styles","card","userImage","uri","cardFooter","alignItems","justifyContent","marginRight","substring","verifiedUsersId","includes","brightBlue","email","followButton","followButtonText","StyleSheet","create","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","elevation","marginVertical","backgroundColor","flexBasis","marginHorizontal","borderRadius","paddingVertical","paddingHorizontal","borderTopLeftRadius","borderTopRightRadius","flexDirection","cardContent","cardHeader","paddingTop","paddingBottom","borderBottomLeftRadius","borderBottomRightRadius","marginTop","alignSelf","borderColor","borderWidth","fontSize","flex","color","fontWeight"],"mappings":"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","sourcesContent":["import React, {useEffect, useState } from 'react';\r\nimport {\r\n    StyleSheet,\r\n    Text,\r\n    View,\r\n    TouchableOpacity,\r\n    Image,\r\n} from 'react-native';\r\nimport { Octicons } from '@expo/vector-icons';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport * as usersActions from '../../store/actions/users';\r\nimport Colors from '../../constants/Colors';\r\nimport { showMessage } from \"react-native-flash-message\";\r\nimport { useNavigation } from '@react-navigation/native';\r\n\r\nimport ENV from '../../env';\r\nimport VerifiedUser from '../../constants/VerifiedUser';\r\n\r\n\r\nconst UserList = (props) => {\r\n    const { item, followHandler } = props;\r\n    const [imageUri, setImageUri] = useState(`${ENV.apiUrl}/user/photo/${item._id}`)\r\n\r\n\r\n    const loggedInUserId = useSelector(state => state.auth.user._id);\r\n    const allUsers = useSelector(state => state.users.allUsers);\r\n    const loggedInUser = allUsers.filter(u => u._id === loggedInUserId)[0];\r\n\r\n    const dispatch = useDispatch();\r\n    const navigation = useNavigation();\r\n\r\n    const onImageErrorHandler = () => {\r\n        setImageUri(ENV.defaultImageUri);   \r\n    }\r\n\r\n    const checkFollow = (userId) => {\r\n        const isFollowed = loggedInUser.following.filter(f => f._id === userId).length !== 0;\r\n        return isFollowed;\r\n    }\r\n\r\n    const followUserHandler = async () => {\r\n        if(checkFollow(item._id)){\r\n            followHandler(item._id);\r\n            showMessage({\r\n                message: `Your are already following ${item.name}.`,\r\n                type: \"success\",\r\n                duration: 3000,\r\n                icon: { icon: \"success\", position: 'left' }\r\n            });\r\n        } else {\r\n            await dispatch(usersActions.followFindPeople(item._id))\r\n            followHandler(item._id);\r\n            showMessage({\r\n                message: `Your are now following ${item.name}.`,\r\n                type: \"success\",\r\n                duration: 3000,\r\n                icon: { icon: \"success\", position: 'left' }\r\n            });\r\n            await dispatch(usersActions.followUser(item))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <TouchableOpacity \r\n            onPress={() => navigation.navigate('UserProfile', {userId: item._id, name: item.name} )}\r\n            style={styles.card}\r\n        >\r\n            <Image \r\n                style={styles.userImage} \r\n                source={{ uri: imageUri }}\r\n                onError={onImageErrorHandler}\r\n            />\r\n            <View style={styles.cardFooter}>\r\n                <View style={{ alignItems: \"center\", justifyContent: \"center\" }}>\r\n                    <Text\r\n                        onPress={() => navigation.navigate('UserProfile',{ userId: item._id, name: item.name} )}\r\n                        style={{...styles.name, marginRight: 10}}\r\n                    >\r\n                        {item.name.length > 10 ? (\r\n                            <>{item.name.substring(0,10)}... </>\r\n                        ) : (\r\n                            <>{item.name + \" \"}</>\r\n                        )}\r\n                        {\r\n                            VerifiedUser.verifiedUsersId.includes(item._id) && <Octicons name=\"verified\" size={20} color={Colors.brightBlue} />\r\n                        }\r\n                    </Text>\r\n                    <Text style={styles.position}>\r\n                        {item.email.length > 15 ? (\r\n                            <>{item.email.substring(0,15)}...</>\r\n                        ) : (\r\n                            <>{item.email}</>\r\n                        )}\r\n                    </Text>\r\n                    <TouchableOpacity style={styles.followButton}>\r\n                        <Text\r\n                            onPress={followUserHandler}\r\n                            style={styles.followButtonText}>Follow</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n            </View>\r\n        </TouchableOpacity>\r\n    )\r\n}\r\n\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    card: {\r\n        shadowColor: '#00000021',\r\n        shadowOffset: {\r\n            width: 0,\r\n            height: 6,\r\n        },\r\n        shadowOpacity: 0.37,\r\n        shadowRadius: 7.49,\r\n        elevation: 12,\r\n\r\n        marginVertical: 5,\r\n        backgroundColor: \"white\",\r\n        flexBasis: '46%',\r\n        marginHorizontal: 5,\r\n        borderRadius: 25\r\n    },\r\n    cardFooter: {\r\n        paddingVertical: 17,\r\n        paddingHorizontal: 16,\r\n        borderTopLeftRadius: 1,\r\n        borderTopRightRadius: 1,\r\n        flexDirection: 'row',\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\"\r\n    },\r\n    cardContent: {\r\n        paddingVertical: 12.5,\r\n        paddingHorizontal: 16,\r\n    },\r\n    cardHeader: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'space-between',\r\n        paddingTop: 12.5,\r\n        paddingBottom: 25,\r\n        paddingHorizontal: 16,\r\n        borderBottomLeftRadius: 1,\r\n        borderBottomRightRadius: 1,\r\n    },\r\n    userImage: {\r\n        height: 120,\r\n        width: 120,\r\n        borderRadius: 60,\r\n        marginTop: 20,\r\n        alignSelf: 'center',\r\n        borderColor: \"#DCDCDC\",\r\n        borderWidth: 3,\r\n        backgroundColor: '#c2c2c2'\r\n    },\r\n    name: {\r\n        fontSize: 18,\r\n        flex: 1,\r\n        alignSelf: 'center',\r\n        color: \"#008080\",\r\n        fontWeight: 'bold'\r\n    },\r\n    position: {\r\n        fontSize: 14,\r\n        flex: 1,\r\n        alignSelf: 'center',\r\n        color: \"#696969\"\r\n    },\r\n    followButton: {\r\n        marginTop: 10,\r\n        height: 35,\r\n        width: 100,\r\n        flexDirection: 'row',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderRadius: 30,\r\n        backgroundColor: Colors.brightBlue\r\n    },\r\n    followButtonText: {\r\n        color: \"#FFFFFF\",\r\n        fontSize: 18,\r\n    },\r\n    icon: {\r\n        height: 20,\r\n        width: 20,\r\n    }\r\n});\r\n\r\nexport default UserList;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { SET_USERS, FOLLOW, UNFOLLOW, SET_FIND_PEOPLE, FOLLOW_FIND_PEOPLE, UPDATE_USER } from \"../actions/users\";\nvar initialState = {\n  allUsers: [],\n  findPeople: []\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case SET_USERS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        allUsers: action.users\n      });\n\n    case FOLLOW:\n      var userIndex = state.allUsers.findIndex(function (user) {\n        return user._id === action.user._id;\n      });\n      var loggedUserIndex = state.allUsers.findIndex(function (user) {\n        return user._id === action.loggedUser._id;\n      });\n\n      var updatedFollowAllUsers = _toConsumableArray(state.allUsers);\n\n      updatedFollowAllUsers[userIndex].followers = updatedFollowAllUsers[userIndex].followers.concat(action.loggedUser);\n      updatedFollowAllUsers[loggedUserIndex].following = updatedFollowAllUsers[loggedUserIndex].following.concat(action.user);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        allUsers: updatedFollowAllUsers\n      });\n\n    case UNFOLLOW:\n      var userInd = state.allUsers.findIndex(function (user) {\n        return user._id === action.user._id;\n      });\n      var loggedUserInd = state.allUsers.findIndex(function (user) {\n        return user._id === action.loggedUser._id;\n      });\n\n      var updatedUnfollowAllUsers = _toConsumableArray(state.allUsers);\n\n      updatedUnfollowAllUsers[userInd].followers = updatedUnfollowAllUsers[userInd].followers.filter(function (u) {\n        return u._id !== action.loggedUser._id;\n      });\n      updatedUnfollowAllUsers[loggedUserInd].following = updatedUnfollowAllUsers[loggedUserInd].following.filter(function (u) {\n        return u._id !== action.user._id;\n      });\n      return _objectSpread(_objectSpread({}, state), {}, {\n        allUsers: updatedUnfollowAllUsers\n      });\n\n    case SET_FIND_PEOPLE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        findPeople: action.users\n      });\n\n    case FOLLOW_FIND_PEOPLE:\n      var updatedFindPeople = _toConsumableArray(state.findPeople);\n\n      updatedFindPeople = updatedFindPeople.filter(function (i) {\n        return i._id !== action.userId;\n      });\n      return _objectSpread(_objectSpread({}, state), {}, {\n        findPeople: updatedFindPeople\n      });\n\n    case UPDATE_USER:\n      var index = state.allUsers.findIndex(function (user) {\n        return user._id === action.user._id;\n      });\n\n      var updatedAllUsers = _toConsumableArray(state.allUsers);\n\n      delete action.user.photo;\n      updatedAllUsers[index] = action.user;\n      return _objectSpread(_objectSpread({}, state), {}, {\n        allUsers: updatedAllUsers\n      });\n\n    default:\n      return state;\n  }\n});","map":{"version":3,"sources":["D:/nodejs/mern/SocialApp-React-Native-master/store/reducers/users.js"],"names":["SET_USERS","FOLLOW","UNFOLLOW","SET_FIND_PEOPLE","FOLLOW_FIND_PEOPLE","UPDATE_USER","initialState","allUsers","findPeople","state","action","type","users","userIndex","findIndex","user","_id","loggedUserIndex","loggedUser","updatedFollowAllUsers","followers","concat","following","userInd","loggedUserInd","updatedUnfollowAllUsers","filter","u","updatedFindPeople","i","userId","index","updatedAllUsers","photo"],"mappings":"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","sourcesContent":["import { SET_USERS, FOLLOW, UNFOLLOW, SET_FIND_PEOPLE, FOLLOW_FIND_PEOPLE, UPDATE_USER } from \"../actions/users\";\r\n\r\nconst initialState = {\r\n    allUsers: [],\r\n    findPeople: []\r\n};\r\n\r\nexport default (state=initialState, action) => {\r\n    switch(action.type){\r\n        case SET_USERS:\r\n            return{\r\n                ...state,\r\n                allUsers: action.users\r\n            }\r\n        \r\n        case FOLLOW:\r\n            const userIndex = state.allUsers.findIndex(user => user._id === action.user._id);\r\n            const loggedUserIndex = state.allUsers.findIndex(user => user._id === action.loggedUser._id);\r\n            const updatedFollowAllUsers = [...state.allUsers];\r\n            // add loggedin user in followers list of other user\r\n            updatedFollowAllUsers[userIndex].followers = updatedFollowAllUsers[userIndex].followers.concat(action.loggedUser);\r\n            // add other user in following list of logged user\r\n            updatedFollowAllUsers[loggedUserIndex].following = updatedFollowAllUsers[loggedUserIndex].following.concat(action.user);\r\n            return{\r\n                ...state,\r\n                allUsers: updatedFollowAllUsers\r\n            }\r\n\r\n        case UNFOLLOW:\r\n            const userInd = state.allUsers.findIndex(user => user._id === action.user._id);\r\n            const loggedUserInd = state.allUsers.findIndex(user => user._id === action.loggedUser._id);\r\n            const updatedUnfollowAllUsers = [...state.allUsers];\r\n            // remove loggedin user from followers list of other user\r\n            updatedUnfollowAllUsers[userInd].followers = updatedUnfollowAllUsers[userInd].followers.filter(u => u._id !== action.loggedUser._id)\r\n            // remove other user from following list of logged user\r\n            updatedUnfollowAllUsers[loggedUserInd].following = updatedUnfollowAllUsers[loggedUserInd].following.filter(u => u._id !== action.user._id);\r\n            return{\r\n                ...state,\r\n                allUsers: updatedUnfollowAllUsers\r\n            }\r\n\r\n        case SET_FIND_PEOPLE:\r\n            return{\r\n                ...state,\r\n                findPeople: action.users\r\n            }\r\n\r\n        case FOLLOW_FIND_PEOPLE:\r\n            let updatedFindPeople = [...state.findPeople];\r\n            updatedFindPeople = updatedFindPeople.filter(i => i._id !== action.userId )\r\n\r\n            // console.log(updatedFindPeople);\r\n            return{\r\n                ...state,\r\n                findPeople: updatedFindPeople\r\n            }\r\n\r\n        case UPDATE_USER:\r\n            const index = state.allUsers.findIndex(user => user._id === action.user._id);\r\n            const updatedAllUsers = [...state.allUsers]\r\n            delete action.user.photo;\r\n            updatedAllUsers[index] = action.user;\r\n            // console.log(updatedAllUsers[index]);\r\n            return{\r\n                ...state,\r\n                allUsers: updatedAllUsers\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}